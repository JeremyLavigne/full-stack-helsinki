(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(39)},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(15),c=t.n(o),u=t(3),l=t(2),i=t.n(l),s=t(4),f=t(5),m=t.n(f),p="/api/persons",d={getAll:function(){var e=Object(s.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.a.get(p),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.a.post(p,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(i.a.mark((function e(n,t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.a.put("".concat(p,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(s.a)(i.a.mark((function e(n){var t,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.a.delete("".concat(p,"/").concat(n)),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},b=function(e){var n=e.successMsg;return""!==n?a.a.createElement("p",{style:{color:"green",fontStyle:"italic",fontSize:16}},n):null},h=function(e){var n=e.errorMsg;return""!==n?a.a.createElement("p",{style:{color:"red",fontStyle:"bold",fontSize:18}},n):null},v=function(e){var n=e.onChange,t=e.filter;return a.a.createElement("div",null,"Filter : ",a.a.createElement("input",{value:t,onChange:n}))},g=function(e){var n=e.onSubmit,t=e.newName,r=e.newNumber,o=e.onChange,c=e.onChange2;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"Name: ",a.a.createElement("input",{value:t,onChange:o}),a.a.createElement("br",null),"Number: ",a.a.createElement("input",{value:r,onChange:c})),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"Add Name")))},E=function(e){var n=e.persons,t=e.filter,r=e.onClick;return a.a.createElement("ul",null,n.filter((function(e){return e.name.toLowerCase().includes(t)})).map((function(e){return a.a.createElement("li",{key:e.name},e.name,", ",e.number,a.a.createElement("button",{onClick:function(n,t){return r(e.id,e.name)}},"\u2620"))})))},w=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(r.useState)(""),l=Object(u.a)(c,2),i=l[0],s=l[1],f=Object(r.useState)(""),m=Object(u.a)(f,2),p=m[0],w=m[1],j=Object(r.useState)(""),y=Object(u.a)(j,2),O=y[0],k=y[1],C=Object(r.useState)(""),S=Object(u.a)(C,2),x=S[0],N=S[1],A=Object(r.useState)(""),M=Object(u.a)(A,2),P=M[0],z=M[1];Object(r.useEffect)((function(){d.getAll().then((function(e){console.log("promise fulfilled (getAll, first)"),o(e)}))}),[]);return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(b,{successMsg:x}),a.a.createElement(v,{onChange:function(e){k(e.target.value)},filter:O}),a.a.createElement("h2",null,"Add someone"),a.a.createElement(g,{onSubmit:function(e){if(e.preventDefault(),console.log("already in array ? ",t.map((function(e){return e.name})).includes(i)),t.map((function(e){return e.name})).includes(i))if(window.confirm("".concat(i," is already added to phonebook, would you like to change the number?"))){console.log(t.filter((function(e){return e.name===i})));var n=t.filter((function(e){return e.name===i}))[0].id,r={name:i,number:p};d.update(n,r).then((function(e){console.log("promise fulfilled (update), with object :",e),o(t.map((function(n){return n.name!==i?n:e})))})).catch((function(e){z("Person '".concat(i,"' was already removed from server")),setTimeout((function(){z("")}),3e3),o(t.filter((function(e){return e.id!==n})))}))}else console.log("Cancelled, nothing changes"),s(""),w("");else{var a={name:i,number:p};d.create(a).then((function(e){console.log("promise fulfilled (create), with new object :",e),o(t.concat(e))})),N("".concat(i," has been successfully add")),setTimeout((function(){N("")}),2e3),s(""),w("")}},newName:i,newNumber:p,onChange:function(e){s(e.target.value)},onChange2:function(e){w(e.target.value)}}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(h,{errorMsg:P}),a.a.createElement(E,{persons:t,filter:O,onClick:function(e,n){console.log("Zoup, you are dead, you with id :",e,"and name :",n),d.deletePerson(e).then((function(){console.log("promise fulfilled (delete), object id :",e),o(t.filter((function(n){return n.id!==e})))}))}}))};c.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.3e4ae0ba.chunk.js.map